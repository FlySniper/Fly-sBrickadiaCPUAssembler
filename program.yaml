# R7-R9 are temporary registers
# 209430786240 is a blue score line
start:
  - "const Zero Zero R9 45801799680"
  - "const Zero Zero R8 0"
  - "const Zero Zero R7 94"
  - "const Zero Zero R6 357913941"
  - "shiftl R6 Zero R5 30"
  - "bor R5 R6 R5 0"
  - "const Zero Zero R4 0"
  - "const Zero Zero R3 0"
  - "const Zero Zero R2 0"
  - "const Zero Zero R1 0"
  - "const Zero Zero R0 0"
  - "const Zero Zero Ret2 0"
  - "const Zero Zero Ret1 0"
  - "const Zero Zero P2 0"
  - "const Zero Zero P1 0"
  - "const Zero Zero SP 0"
  - "jump Zero Zero Zero place_vertical_line"
place_vertical_line:
#  - "save R9 R7 Zero 160"
  - "sub R7 Zero R7 3"
  - "cmpl Zero R7 R8 0"
  - "bnz Zero R8 Zero place_vertical_line"
  - "jump Zero Zero Zero place_horizontal_line"
place_horizontal_line:
  - "save R5 Zero Zero 181"
  - "save R5 Zero Zero 182"
  - "save R5 Zero Zero 183"
  - "save R5 Zero Zero 235"
  - "save R5 Zero Zero 236"
  - "save R5 Zero Zero 237"
  - "const Zero Zero R5 22900987200"
  - "const Zero Zero R6 1365"
  - "shiftl R6 Zero R6 42"
  - "bor R5 R6 R5 0"
  - "jump Zero Zero Zero place_score"
place_score:
  - "save R5 Zero Zero 252"
  - "save R5 Zero Zero 250"
  - "save R5 Zero Zero 249"
  - "save R5 Zero Zero 247"
  - "jump Zero Zero Zero place_paddels_ball"
place_paddels_ball:
  - "const Zero Zero R5 48"
  - "shiftl R5 Zero R5 42"
  - "save R5 Zero Zero 232"
  - "save R5 Zero Zero 229"
  - "save R5 Zero Zero 226"
  - "save R5 Zero Zero 223"
  - "const Zero Zero R5 3"
  - "shiftl R5 Zero R5 18"
  - "save R5 Zero Zero 234"
  - "save R5 Zero Zero 231"
  - "save R5 Zero Zero 228"
  - "save R5 Zero Zero 225"
  - "const Zero Zero R6 30"
  - "const Zero Zero R5 63"
  - "shiftl R5 R6 R5 0"
  - "save R5 Zero Zero 208"
  - "const Zero Zero R4 10"
  - "const Zero Zero R3 10"
  - "const Zero Zero R2 0"
  - "const Zero Zero R1 0"
  - "const Zero Zero R5 470"
  - "jump Zero Zero Zero run_game"
run_game:
  - "const Zero Zero Ret2 place_pixel_ret_1"
  - "const Zero Zero P1 0"
  - "move R5 Zero P2 0"
  - "jump Zero Zero Zero place_pixel"
place_pixel_ret_1:
  - "add R2 R4 R2 0"
  - "add R1 R3 R1 0"
  - "cmpl R2 R1 R7 0"
  - "bnz Zero R7 Zero ball_x_less_y"
  - "jump Zero Zero Zero ball_y_less_x"
ball_x_less_y:
  - "move R3 Zero R1 0"
  - "const Zero Zero Ret2 place_pixel_ret_2"
  - "const Zero Zero P1 0"
  - "move R5 Zero P2 0"
  - "jump Zero Zero Zero place_pixel"
place_pixel_ret_2:
  - "add R5 Zero R5 30"
  - "const Zero Zero Ret2 run_game"
  - "const Zero Zero P1 63"
  - "move R5 Zero P2 0"
  - "jump Zero Zero Zero place_pixel"
ball_y_less_x:
  - "move R4 Zero R2 0"
  - "const Zero Zero Ret2 place_pixel_ret_3"
  - "const Zero Zero P1 0"
  - "move R5 Zero P2 0"
  - "jump Zero Zero Zero place_pixel"
place_pixel_ret_3:
  - "add R5 Zero R5 1"
  - "const Zero Zero Ret2 run_game"
  - "const Zero Zero P1 63"
  - "move R5 Zero P2 0"
  - "jump Zero Zero Zero place_pixel"
place_pixel:
# P1 is the pixel color (0-63)
# P2 is the pixel position (0-959)
# Ret2 is the jump return point
#  - "save R9 SP Zero 0"
#  - "save R8 SP Zero 1"
#  - "save R7 SP Zero 2"
  - "save P2 SP Zero 3"
  - "save P1 SP Zero 4"
  - "add SP Zero SP 15"
  - "const Zero Zero R9 10"
  - "const Zero Zero R8 6"
  - "modf P2 Zero R7 10"
  - "sub R9 R7 R7 1"
  - "mul R7 R8 R7 0"
  - "shiftl P1 R7 P1 0"
  - "div R9 P2 P2 0"
  - "load P2 Zero R9 160"
  - "const Zero Zero R8 63"
  - "shiftl R8 R7 R8 0"
  - "bnot R8 Zero R8 0"
  - "band R9 R8 R9 0"
  - "bor P1 R9 P1 0"
  - "save P1 P2 Zero 160"
  - "sub SP Zero SP 15"
#  - "load SP Zero R9 0"
#  - "load SP Zero R8 1"
#  - "load SP Zero R7 2"
  - "load SP Zero P2 3"
  - "load SP Zero P1 4"
  - "jump Ret2 Zero Zero 0"
loop:
  - "jump Zero Zero Zero place_pixel"
place_pixel_call_1:
  - "sub P2 Zero P2 1"
  - "add P1 Zero P1 1"
  - "modf P1 Zero P1 64"
  - "bnz Zero P2 Zero loop"